# 计算机网络
## 1、计算机网络概论
* 计算机网络 = 通信技术 + 计算机技术
* 计算机网络是通信技术与计算机技术紧密结合的产物
### 通信系统模型
从**信源**经过**发送设备**传输到信道，在**信道**上传输到**接收设备**，由**接收设备**传递给**信宿**

对于计算机网络来说，其本质就是一种通信网络，信源和信宿都是计算机

### 计算机网络定义

定义：计算机网络就是互连的、自治的计算机集合

自治 - 无主从关系

互连 - 互联互通

​	-通信链路（连接每一个终端的**主机**）

### Internet

组成细节角度

* 全球最大的**互联网络**
* ISP网络互连
* 数以百万计的互连的计算设备集合（不局限于计算机，还可以是智能手机、家用电器）
* 主机（hosts） = 端系统 （end systems）
  * 特点： 可以运行网络应用
* 通过**通信链路**连接：光纤、铜缆、无线电、卫星...
* 通过**交换网络**进行**分组交换**： 转发分组（数据包）
  * 路由器routers和交换机switches

服务角度

* 为网络应用提供通信服务的通信基础设施
* 为网络应用提供应用编程接口（API）
  * 支持应用程序“连接”Internet，发送/接收数据
  * 提供类似于邮政系统的数据传输服务

除了硬件上的设备，还需要**协议**保证顺畅运行和数据有序交付

### 协议

* 硬件（主机、路由器、通信链路等）是计算机网络的基础
* 计算机网络中的数据交换必须遵守事先约定好的规则
* 如同交通系统（光建设道路，没有交通规则是不行的）

任何通信或信息交换过程中都需要规则

计算机网络的所有通信规则都必须遵守某些规则——协议

```
网络协议（network protocol），简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定

协议规定了通信实体之间所交换的消息的格式、意义、顺序以及针对收到信息或发生的事件所采取的“动作”actions
```

#### 协议的三要素

* 语法 Syntax
  * 数据与控制信息的结构或格式
  * 信号电平（底层协议需要设置）
* 语义 Semantics
  * 需要发出何种控制信息
  * 完成何种动作以及做出何种响应
  * 差错控制
* 时序 Timing
  * 时间顺序
  * 速度匹配

协议规范了网络中所有信息发送和接收过程

* Internet协议标准
  * RFC: Request For Comments
  * IETF: 互联网工程任务组 Internet Engineering Task Force
  * IRTF: 互联网研究任务组 Internet Research Task Force

### 计算机网络结构

* 网络边缘
  * 主机（端系统）
  * 网络应用
* 接入网络或物理介质
  * 有线或无线通信链路
* 网络核心（核心网络）
  * 互联的路由器（或分组转发设备）

#### 网络边缘

* 主机（端系统）
  * 位于“网络边缘”
  * 运行网络应用程序，如Web,email
* 客户/服务器（client/server)应用模型
  * 客户发送请求，接收服务器响应
  * 如：Web应用，文件传输FTP应用
* 对等（peer-peer，P2P）应用模型
  * 没有客户和服务器的身份之分，也没有专用服务器进行通信
  * 通信在***对等实体***之间直接进行
  * 如：Gnutella，BT，Skype，QQ

#### 接入网络

* 类别：
  * 住宅（家庭）接入网络
  * 机构接入网络（学校、企业等）
  * 移动接入网络

这个类别的划分并不是严格意义上的，住宅接入网络也可以用于学校、企业，只是大多数场合符合上述定义

* 用户真正关心的是
  * 带宽 bandwidth （bps）
  * 共享/独占

##### 接入网络：数字用户线路 DSL （Digital Subscriber Line）

* 利用已有的电话线连接中心局的DSLAM
  * 数据通信通过DSL电话线接入Internet
  * 语音（电话）通过DSL电话线接入电话网
  * 独占式
* < 2.5Mbps上行传输速率 （典型速率 < 1Mbps）
* < 24Mbps下行传输速率 （典型速率 < 10）
* 频分多路复用（Frequency-division multiplexing，FDM）
  * 是指载波带宽被划分为多种不同频带的子信道，每个子信道可以并行的传送一路信号的一种多路复用技术
  * 在频分复用系统中，信道的可用频带被分成若干个互不交叠的频段，每路信号用其中一个频段传输，因而可以使用滤波器将它们分别滤出来，然后分别解调接收
  * 50kHz - 1MHz 用于下行传输
  * 4kHz - 50kHz 用于上行传输
  * 0kHz - 4kHz 用于传统电话

* ADSL： Asymmetric Digital Subscriber Line非对称数字用户线路

##### 接入网络：电缆网络

* cable modem
* 使用频分多路复用：在不同频带（载波）上传输不同频道

* HFC：混合光纤同轴电缆 hybrid fiber coax
  * 非对称：下行高达30Mbps传输速率，上行为2Mbps传输速率
* 各家庭（设备）通过电缆网络->光纤接入ISP路由器
  * 各家庭共享家庭至电缆头端的接入网络
  * 不同于DSL的独占至中心局的接入

机构（企业）接入网络（Ethernet)

* 主要用于公司、高校、企业等组织机构
* 典型传输速率：10Mbps，100Mbps，1Gbps，10Gbps
* 目前，端系统通过直接连接以太网交换机switch

##### 无线接入网络

* 通过共享的无线接入网络连接端系统与路由器	
  * 通过基站base station或称为接入点Access point
* 无线局域网LANS
* 广域无线接入

#### 网络核心

* 互联的路由器网络

* 网路核心的关键功能：路由 + 转发

* 路由 routing

  * 确定分组从源到目的传输路径

    * 路由算法和路由协议

    * | 本地转发表（由路由器维护，也称为路由表） |      |
      | ---------------------------------------- | ---- |
      | 目的地址                                 |      |
      | 0100                                     | 3    |
      | 0101                                     | 2    |
      | 0111                                     | 2    |
      | 1001                                     | 1    |

* 转发 forwarding

  * 将分组从路由器的输入端口交换至正确的输出端口



网络核心解决的基本问题：如何实现数据从源主机通过网络核心送达目的主机

通过**数据交换**

### 因特网的结构

* 端系统通过接入ISP（access ISPs）连接到Internet
* 当前的Internet结构
  * 动态变化的
  * 没有精确描述
* 一级ISP之间进行互连的方式
  * 使用对等链路（peering link）
  * 引入Internet exchange point，也叫NAP进行交换

### 电路交换

* 电路交换的三个阶段
  * 建立连接
  * 通信
  * 释放连接

动态分配传输资源

电路交换网络使用***多路复用***技术来共享中继线

### 多路复用 Multiplexing

* 多路复用（Multiplexing），简称复用，是通信技术中的基本概念
* 共享信道

```
多路复用Multiplexing：
1、链路/网络资源（如带宽）划分为“资源片”
2、将资源片分配给每路“呼叫”calls
3、每路呼叫独占分配到的资源片进行通信
4、资源片可能“闲置” idle  无共享
```

* 典型的多路复用技术
  * 频分多路复用 frequency division multiplexing FDM
  * 时分多路复用 time division multiplexing TDM
  * 波分多路复用 wavelength division multiplexing WDM
  * 码分多路复用 code division multiplexing CDM

#### 频分多路复用 FDM

* 频分多路复用的各用户占用不同的带宽资源
  * 这里的“带宽”是频率带宽（单位Hz）而不是数据发送速率
* 用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带

#### 时分多路复用 TDM

* 时分复用是将时间划分为一段段等长的***时分复用帧***（TDM帧），每个用户在每个TDM帧中占用固定序号的时隙
* 每用户所占用的时隙是周期性出现（其周期就是TDM帧的长度）
* 时分复用的所有用户在不同的时间占用相同的频带宽度
* 类似于操作系统中的时间片轮转调度算法

#### 波分多路复用 WDM

* 波分复用实质是光的频分复用（在描述光的时候，人们更愿意使用波长）

#### 码分多路复用 CDM

* 广泛应用于无线链路共享 （如蜂窝网，卫星通信等）
* 每个用户分配一个唯一的mbit码片序列（chipping sequence），其中“0”用“-1”表示、“1”用“+1”表示
  * 例如：S站的码片序列： -1-1-1+1+1-1+1+1
* 各用户使用相同频率载波，利用各自